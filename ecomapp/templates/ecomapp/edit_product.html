{% extends 'ecomapp/base.html' %}

{% block content %}
  <h2>Edit Product</h2>

  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" class="form-control" value="{{ product.name }}">
    </div>
    <div class="form-group">
      <label for="description">Description:</label>
      <textarea id="description" name="description" class="form-control">{{ product.description }}</textarea>
    </div>
    <div class="form-group">
      <label for="price">Price:</label>
      <input type="text" id="price" name="price" class="form-control" value="{{ product.price }}">
    </div>
    <div class="form-group">
      {% if product.image %}
        <img>
          <source src="{{ product.image.url }}" type="{{ product.image.content_type }}">
        </img>
      {% else %}
        <p> No image available </p>
      {% endif %}
      <input type="file" id="image" name="image" class="form-control-file">
    </div>
      {% if product.video %}
        <video width="320" height="240" controls>
          <source src="{{ product.video.url }}" type="{{ product.video.content_type }}">
          Your browser does not support the video tag.
        </video>
      {% else %}
        <p>No video available</p>
      {% endif %}
      <input type="file" id="video" name="video" class="form-control-file">
    <div>
    </div>
    <div class="form-group">
      <label for="more_images">More Images:</label>
      <div class="row">
        {% for image in product.more_images.all %}
          <div class="col-md-3">
            <img src="{{ image.file.url }}" alt="{{ image.file.name }}" class="img-fluid">
            <a href="{% url 'remove_image' product.id image.id %}" class="btn btn-danger btn-sm mt-2">Remove</a>
          </div>
        {% endfor %}
      </div>
      <input type="file" id="more_images" name="more_images" class="form-control-file" multiple>
    </div>
    <div class="form-group">
      <button type="submit" class="btn btn-primary">Update Product</button>
    </div>
  </form>

{% endblock %}
